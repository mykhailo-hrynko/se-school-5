# Functional Testing

**–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è** ‚Äî —Ü–µ –ø—Ä–æ—Ü–µ—Å –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏, —á–∏ –ø—Ä–∞—Ü—é—î —Å–∏—Å—Ç–µ–º–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ –¥–æ –≤–∏–º–æ–≥.

**–ú–µ—Ç–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è:**

- –ó–Ω–∞–π—Ç–∏ –Ω–µ–¥–æ–ª—ñ–∫–∏ —è–∫–æ–º–æ–≥–∞ —Ä–∞–Ω—ñ—à–µ (—â–æ–± –∑–º–µ–Ω—à–∏—Ç–∏ –≤–∞—Ä—Ç—ñ—Å—Ç—å –ø–æ–º–∏–ª–∫–∏).
- –ü–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è, —â–æ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∞—Ü—é—î –∫–æ—Ä–µ–∫—Ç–Ω–æ –ø—ñ—Å–ª—è –∑–º—ñ–Ω –∫–æ–¥—É —á–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó.

**–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ** —Ç–µ—Å—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å, —â–æ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤–∏–∫–æ–Ω—É—î –≤—Å—ñ —Å–≤–æ—ó —Ñ—É–Ω–∫—Ü—ñ—ó:

- ‚úÖ –ø–æ–≤–µ—Ä—Ç–∞—î –æ—á—ñ–∫—É–≤–∞–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏
- ‚úÖ –≤–∏–∫–æ–Ω—É—î –ª–∏—à–µ –∑–∞–ø–ª–∞–Ω–æ–≤–∞–Ω—ñ –¥—ñ—ó

**–ù–µ—Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ** —Ç–µ—Å—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å –¥–æ–¥–∞—Ç–∫–æ–≤—ñ –≤–∏–º–æ–≥–∏. –ù–∞–ø—Ä–∏–∫–ª–∞–¥:

- üöÄ **Performance Testing** ‚Äî —à–≤–∏–¥–∫–æ–¥—ñ—è —Å–∏—Å—Ç–µ–º–∏
- üìä **Load Testing** ‚Äî —á–∏ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∞—Ü—é—î –∫–æ—Ä–µ–∫—Ç–Ω–æ –ø—ñ–¥ –≤–∏–∑–Ω–∞—á–µ–Ω–∏–º –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è–º
- üî• **Stress Testing** ‚Äî –ø–æ–≤–µ–¥—ñ–Ω–∫–∞ —Å–∏—Å—Ç–µ–º–∏ –≤ —Å—Ç—Ä–µ—Å–æ–≤–∏—Ö —É–º–æ–≤–∞—Ö
- üõ°Ô∏è **Security Testing** ‚Äî –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –≤—Ä–∞–∑–ª–∏–≤–æ—Å—Ç–µ–π —É —Å–∏—Å—Ç–µ–º—ñ
- üëç **Usability Testing** ‚Äî –∑—Ä—É—á–Ω—ñ—Å—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
- ‚ôø **Accessibility Testing** ‚Äî –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –∑ –æ–±–º–µ–∂–µ–Ω–Ω—è–º–∏
- üíª **Compatibility Testing** ‚Äî –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ —Ä—ñ–∑–Ω–∏—Ö –û–°/–±—Ä–∞—É–∑–µ—Ä–∞—Ö/–ø—Ä–∏—Å—Ç—Ä–æ—è—Ö
- üåç **Localization Testing** ‚Äî –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–µ—Ä–µ–∫–ª–∞–¥—É, —Ñ–æ—Ä–º–∞—Ç—ñ–≤

> –¢–µ—Å—Ç—É–≤–∞—Ç–∏ –≤—Ä—É—á–Ω—É ‚Äî –¥–æ–≤–≥–æ, –¥–æ—Ä–æ–≥–æ –π –Ω–µ–Ω–∞–¥—ñ–π–Ω–æ (—á–µ—Ä–µ–∑ –ª—é–¥—Å—å–∫–∏–π —Ñ–∞–∫—Ç–æ—Ä). –¢–æ–º—É –¥–∞–ª—ñ —Ä–æ–∑–≥–ª—è–Ω–µ–º–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω–µ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è.

## –†—ñ–∑–Ω–æ–≤–∏–¥–∏ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

**SUT** (System under the test) - —Å–∏—Å—Ç–µ–º–∞ —á–∏ –º–æ–¥—É–ª—å, —â–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è.

**Mock** - —Ñ—É–Ω–∫—Ü—ñ—è, –æ–±'—î–∫—Ç —á–∏ –º–æ–¥—É–ª—å, —è–∫–∏–π –ø—ñ–¥—Å—Ç–∞–≤–ª—è—î—Ç—å—Å—è –≤ **SUT** –∑–∞–º—ñ—Å—Ç—å —Ä–µ–∞–ª—å–Ω–æ—ó –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ, –¥–ª—è –µ–º—É–ª—è—Ü—ñ—ó –±–∞–∂–∞–Ω–æ—ó –ø–æ–≤–µ–¥—ñ–Ω–∫–∏ —á–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ –≤–∏–∫–ª–∏–∫—É. –ó–∞–∑–≤–∏—á–∞–π –ø–æ—Ç—Ä—ñ–±–Ω—ñ –¥–ª—è –º–æ–¥—É–ª—ñ–≤, —è–∫—ñ –º–∏ –Ω–µ –º–æ–∂–µ–º–æ –∫–æ–Ω—Ç—Ä–æ–ª—é–≤–∞—Ç–∏.

–¢–µ—Å—Ç–∏ —Ä–æ–∑–ø–æ–¥—ñ–ª—è—é—Ç—å –Ω–∞ 3 —Ä—ñ–≤–Ω—ñ:

| –†—ñ–≤–µ–Ω—å          | –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ (SUT)                    | –ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∏          |
| --------------- | --------------------------------------- | ------------------- |
| **Unit**        | –û–∫—Ä–µ–º–∞ —Ñ—É–Ω–∫—Ü—ñ—è —á–∏ –º–æ–¥—É–ª—å                | Vitest, Jest, Mocha |
| **Integration** | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ —Ä–∞–∑–æ–º (API + –±–∞–∑–∞ + —Å–µ—Ä–≤—ñ—Å–∏) |                     |
| **End to End**  | –ü–æ–≤–Ω–∏–π —à–ª—è—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ + –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞ | Playwright, Cypress |

–ü–æ–¥–∏–≤–∏—Å—å [–≤–∏—Å—Ç—É–ø Kent C. Dodds](https://kentcdodds.com/blog/write-tests) —â–æ–± –≤–∏–∑–Ω–∞—á–∏—Ç–∏—Å—è, —è–∫–∏—Ö —Ç–µ—Å—Ç—ñ–≤ –º–∞—î –±—É—Ç–∏ –±—ñ–ª—å—à–µ —ñ —á–æ–º—É.

- –ì–∞—Ä–Ω—ñ —Ç–µ—Å—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å –ø–æ–≤–µ–¥—ñ–Ω–∫—É —Å–∏—Å—Ç–µ–º–∏ –∑ —Ç–æ—á–∫–∏ –∑–æ—Ä—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, –∞ –Ω–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é
- Test coverage 100% –Ω–µ –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ —Ç–µ—Å—Ç–∏ —è–∫—ñ—Å–Ω—ñ
- –ù–∞–¥–º—ñ—Ä–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –º–æ–∫—ñ–≤ –ø—Ä–∏–∑–≤–æ–¥–∏—Ç—å –¥–æ "–∫—Ä–∏—Ö–∫–∏—Ö" —Ç–µ—Å—Ç—ñ–≤. –ú–æ–∫–∞–π —Ç–µ —â–æ –Ω–µ –º–æ–∂–µ—à –∫–æ–Ω—Ç—Ä–æ–ª—é–≤–∞—Ç–∏ (—Å—Ç–æ—Ä–æ–Ω–Ω—ñ —Å–µ—Ä–≤—ñ—Å–∏, –±–∞–∑—É, ...)
- –Ø–∫—â–æ —Ç–µ—Å—Ç–∏ –ø–∞–¥–∞—é—Ç—å –ø—ñ–¥ —á–∞—Å —Ä–µ—Ñ–∞–∫—Ç–æ—Ä—ñ–Ω–≥—É, –∑–Ω–∞—á–∏—Ç—å —Ç–µ—Å—Ç—É—é—Ç—å—Å—è –¥–µ—Ç–∞–ª—ñ —ñ–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü—ñ—ó
- –¢–µ—Å—Ç–∏, —è–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –º–∞—é—Ç—å –±—É—Ç–∏ –ø—Ä–æ—Å—Ç—ñ —Ç–∞ –∑—Ä–æ–∑—É–º—ñ–ª—ñ

## –¢–∏–ø–æ–≤–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç—É

–¢–µ—Å—Ç–∏ –Ω–µ –º–∞—é—Ç—å –∑–∞–ª–µ–∂–∞—Ç–∏ –æ–¥–Ω–µ –≤—ñ–¥ –æ–¥–Ω–æ–≥–æ. –¢–æ–º—É:

- –ø–µ—Ä–µ–¥ —Ç–µ—Å—Ç–æ–º —Ç—Ä–µ–±–∞ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –Ω–æ–≤–∏–π –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ (–∞ –Ω–µ –æ—á—ñ–∫—É–≤–∞—Ç–∏ —â–æ –≤—ñ–Ω –¥–æ—Å—ñ –ø—Ä–∞—Ü—é—î –ø—ñ—Å–ª—è –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö —Ç–µ—Å—Ç—ñ–≤)
- –ø—ñ—Å–ª—è —Ç–µ—Å—Ç—É —Ç—Ä–µ–±–∞ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ –¥–æ –ø–æ—á–∞—Ç–∫–æ–≤–æ–≥–æ —Å—Ç–∞–Ω—É —É—Å—ñ stateful —Ä–µ—Å—É—Ä—Å–∏ (–±–∞–∑—É, –º–æ–∫–∏, —Ç–æ—â–æ)

```ts
type TestContext = {
  app: App;
  baseUrl: string;
};

// .sequential - to launch tests one after another
describe.sequential("Module Name", () => {
  beforeEach<TestContext>(async (t) => {
    // Prepare environment common for all tests
    t.app = createApp(testLogger, testConfig, ...);
    await t.app.start();

    // use to send requests to your api
    t.baseUrl = `http://${t.app.address}:${t.app.port}`;
  });

  afterEach<TestContext>(async (t) => {
    await t.app.stop();
    await db.reset();
    vi.clearAllMocks();
  });

  it<TestContext>("creates subscription with for new email and existing city", (t) => {
    // prepare data
    // perform tested actions
    // check result
  });

  it("sends confirmation email", ...)
  it("fails if email is already registered", ...)
  it("fails if not authorized", ...)
  // ...
});
```

## –ó–∞–≥–∞–ª—å–Ω—ñ –ø–æ—Ä–∞–¥–∏

- –ü–∏—à–∏ –∫–æ–¥ —Ç–∞–∫, —â–æ–± –π–æ–≥–æ –±—É–ª–æ –∑—Ä—É—á–Ω–æ —Ç–µ—Å—Ç—É–≤–∞—Ç–∏
- –Ü–∑–æ–ª—é–π –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ —è–∫—ñ –Ω–µ –º–æ–∂–µ—à –∫–æ–Ω—Ç—Ä–æ–ª—é–≤–∞—Ç–∏
- –ü—Ä–∏ —Ä–æ–∑—Ä–æ–±—Ü—ñ –∑–∞–ø—É—Å–∫–∞–π –∫–æ–¥ —Ç–µ—Å—Ç–∞–º–∏
- –ø–µ—Ä–µ–¥ —Ç–∏–º —è–∫ —Ñ—ñ–∫—Å–∏—Ç–∏ –±–∞–≥, –Ω–∞–ø–∏—à–∏ —Ç–µ—Å—Ç, —è–∫–∏–π –ø–∞–¥–∞—î —ñ –ø—Ä–æ–π–¥–µ, —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ –≤–∏–ø—Ä–∞–≤–∏—Ç–∏ –∫–æ–¥
- —è–∫—â–æ –ø–æ–≤–µ–¥—ñ–Ω–∫–∞ —Å–∏—Å—Ç–µ–º–∞ –∑–º—ñ–Ω–∏–ª–∞—Å—è –∞ –∂–æ–¥–µ–Ω —Ç–µ—Å—Ç –Ω–µ –≤–ø–∞–≤ - –∑–Ω–∞—á–∏—Ç—å —Ç–µ—Å—Ç–∏ –Ω–µ –ø–æ–≤–Ω—ñ
- –≥–∞—Ä–Ω—ñ —Ç–µ—Å—Ç–∏ –Ω–µ —Ç—ñ–ª—å–∫–∏ –ø–∞–¥–∞—é—Ç—å –ø—Ä–∏ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ –ø—Ä–æ–±–ª–µ–º, –∞–ª–µ –π –¥–æ–ø–æ–º–∞–≥–∞—é—Ç—å —à–≤–∏–¥–∫–æ —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫—É–≤–∞—Ç–∏ –ø—Ä–∏—á–∏–Ω—É –ø—Ä–æ–±–ª–µ–º–∏
- —è–∫—â–æ –≤–ø–∞–≤ —Ç–µ—Å—Ç –≤–∏—â–æ–≥–æ —Ä—ñ–≤–Ω—è, –ø–æ–¥—É–º–∞–π —è –ø—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ —Ü–µ —Ä–∞–Ω—ñ—à–µ
