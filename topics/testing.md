# üß™ Functional Testing for Middle Developers

–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è ‚Äî —Ü–µ –ø—Ä–æ—Ü–µ—Å –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏, —á–∏ –ø—Ä–∞—Ü—é—î —Å–∏—Å—Ç–µ–º–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ –¥–æ –≤–∏–º–æ–≥.

**üéØ –ú–µ—Ç–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è:**
- –ó–Ω–∞–π—Ç–∏ –Ω–µ–¥–æ–ª—ñ–∫–∏ —è–∫–æ–º–æ–≥–∞ —Ä–∞–Ω—ñ—à–µ (—â–æ–± –∑–º–µ–Ω—à–∏—Ç–∏ –≤–∞—Ä—Ç—ñ—Å—Ç—å –ø–æ–º–∏–ª–∫–∏).
- –ü–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è, —â–æ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∞—Ü—é—î –∫–æ—Ä–µ–∫—Ç–Ω–æ –ø—ñ—Å–ª—è –∑–º—ñ–Ω –∫–æ–¥—É —á–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó.

**–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ —Ç–µ—Å—Ç–∏** –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å, —â–æ —Å–∏—Å—Ç–µ–º–∞:
- ‚úÖ –ø–æ–≤–µ—Ä—Ç–∞—î –æ—á—ñ–∫—É–≤–∞–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏
- ‚úÖ –≤–∏–∫–æ–Ω—É—î –ª–∏—à–µ –∑–∞–ø–ª–∞–Ω–æ–≤–∞–Ω—ñ –¥—ñ—ó

**–ù–µ—Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ** —Ç–µ—Å—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å –¥–æ–¥–∞—Ç–∫–æ–≤—ñ –≤–∏–º–æ–≥–∏. –ù–∞–ø—Ä–∏–∫–ª–∞–¥:

- üöÄ **Performance Testing** ‚Äî —à–≤–∏–¥–∫–æ–¥—ñ—è —Å–∏—Å—Ç–µ–º–∏
- üìä **Load Testing** ‚Äî —á–∏ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∞—Ü—é—î –∫–æ—Ä–µ–∫—Ç–Ω–æ –ø—ñ–¥ –≤–∏–∑–Ω–∞—á–µ–Ω–∏–º –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è–º
- üî• **Stress Testing** ‚Äî –ø–æ–≤–µ–¥—ñ–Ω–∫–∞ —Å–∏—Å—Ç–µ–º–∏ –≤ —Å—Ç—Ä–µ—Å–æ–≤–∏—Ö —É–º–æ–≤–∞—Ö
- üõ°Ô∏è **Security Testing** ‚Äî –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –≤—Ä–∞–∑–ª–∏–≤–æ—Å—Ç–µ–π —É —Å–∏—Å—Ç–µ–º—ñ
- üëç **Usability Testing** ‚Äî –∑—Ä—É—á–Ω—ñ—Å—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
- ‚ôø **Accessibility Testing** ‚Äî –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –∑ –æ–±–º–µ–∂–µ–Ω–Ω—è–º–∏
- üíª **Compatibility Testing** ‚Äî –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ —Ä—ñ–∑–Ω–∏—Ö –û–°/–±—Ä–∞—É–∑–µ—Ä–∞—Ö/–ø—Ä–∏—Å—Ç—Ä–æ—è—Ö
- üåç **Localization Testing** ‚Äî –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–µ—Ä–µ–∫–ª–∞–¥—É, —Ñ–æ—Ä–º–∞—Ç—ñ–≤

> –¢–µ—Å—Ç—É–≤–∞—Ç–∏ –≤—Ä—É—á–Ω—É ‚Äî –¥–æ–≤–≥–æ, –¥–æ—Ä–æ–≥–æ –π –Ω–µ–Ω–∞–¥—ñ–π–Ω–æ (—á–µ—Ä–µ–∑ –ª—é–¥—Å—å–∫–∏–π —Ñ–∞–∫—Ç–æ—Ä). –¢–æ–º—É –¥–∞–ª—ñ —Ä–æ–∑–≥–ª—è–Ω–µ–º–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω–µ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è.

## –†—ñ–∑–Ω–æ–≤–∏–¥–∏ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

**SUT** (System under the test) - —Å–∏—Å—Ç–µ–º–∞ —á–∏ –º–æ–¥—É–ª—å, —â–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è.

**Mock** - —Ñ—É–Ω–∫—Ü—ñ—è, –æ–±'—î–∫—Ç —á–∏ –º–æ–¥—É–ª—å, —è–∫–∏–π –ø—ñ–¥—Å—Ç–∞–≤–ª—è—î—Ç—å—Å—è –≤ **SUT** –∑–∞–º—ñ—Å—Ç—å —Ä–µ–∞–ª—å–Ω–æ—ó –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ, –¥–ª—è –µ–º—É–ª—è—Ü—ñ—ó –±–∞–∂–∞–Ω–æ—ó –ø–æ–≤–µ–¥—ñ–Ω–∫–∏ —á–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ –≤–∏–∫–ª–∏–∫—É. –ó–∞–∑–≤–∏—á–∞–π –ø–æ—Ç—Ä—ñ–±–Ω—ñ –¥–ª—è –º–æ–¥—É–ª—ñ–≤, —è–∫—ñ –º–∏ –Ω–µ –º–æ–∂–µ–º–æ –∫–æ–Ω—Ç—Ä–æ–ª—é–≤–∞—Ç–∏.

–¢–µ—Å—Ç–∏ —Ä–æ–∑–ø–æ–¥—ñ–ª—è—é—Ç—å –Ω–∞ 3 —Ä—ñ–≤–Ω—ñ:

| –†—ñ–≤–µ–Ω—å          | –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ (SUT)                    | –ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∏          |
| --------------- | --------------------------------------- | ------------------- |
| **Unit**        | –û–∫—Ä–µ–º–∞ —Ñ—É–Ω–∫—Ü—ñ—è —á–∏ –º–æ–¥—É–ª—å                | Vitest, Jest, Mocha |
| **Integration** | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ —Ä–∞–∑–æ–º (API + –±–∞–∑–∞ + —Å–µ—Ä–≤—ñ—Å–∏) |                     |
| **End to End**  | –ü–æ–≤–Ω–∏–π —à–ª—è—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ + –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞ | Playwright, Cypress |

–ü–æ–¥–∏–≤–∏—Å—å [–≤–∏—Å—Ç—É–ø Kent C. Dodds](https://kentcdodds.com/blog/write-tests) —â–æ–± –≤–∏–∑–Ω–∞—á–∏—Ç–∏—Å—è, —è–∫–∏—Ö —Ç–µ—Å—Ç—ñ–≤ –º–∞—î –±—É—Ç–∏ –±—ñ–ª—å—à–µ —ñ —á–æ–º—É.

- –ì–∞—Ä–Ω—ñ —Ç–µ—Å—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å –ø–æ–≤–µ–¥—ñ–Ω–∫—É —Å–∏—Å—Ç–µ–º–∏ –∑ —Ç–æ—á–∫–∏ –∑–æ—Ä—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, –∞ –Ω–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é
- Test coverage 100% –Ω–µ –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ —Ç–µ—Å—Ç–∏ —è–∫—ñ—Å–Ω—ñ
- –ù–∞–¥–º—ñ—Ä–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –º–æ–∫—ñ–≤ –ø—Ä–∏–∑–≤–æ–¥–∏—Ç—å –¥–æ "–∫—Ä–∏—Ö–∫–∏—Ö" —Ç–µ—Å—Ç—ñ–≤. –ú–æ–∫–∞–π —Ç–µ —â–æ –Ω–µ –º–æ–∂–µ—à –∫–æ–Ω—Ç—Ä–æ–ª—é–≤–∞—Ç–∏ (—Å—Ç–æ—Ä–æ–Ω–Ω—ñ —Å–µ—Ä–≤—ñ—Å–∏, –±–∞–∑—É, ...)
- –Ø–∫—â–æ —Ç–µ—Å—Ç–∏ –ø–∞–¥–∞—é—Ç—å –ø—ñ–¥ —á–∞—Å —Ä–µ—Ñ–∞–∫—Ç–æ—Ä—ñ–Ω–≥—É, –∑–Ω–∞—á–∏—Ç—å —Ç–µ—Å—Ç—É—é—Ç—å—Å—è –¥–µ—Ç–∞–ª—ñ —ñ–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü—ñ—ó
- –¢–µ—Å—Ç–∏, —è–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –º–∞—é—Ç—å –±—É—Ç–∏ –ø—Ä–æ—Å—Ç—ñ —Ç–∞ –∑—Ä–æ–∑—É–º—ñ–ª—ñ

## –¢–∏–ø–æ–≤–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç—É

–¢–µ—Å—Ç–∏ –Ω–µ –º–∞—é—Ç—å –∑–∞–ª–µ–∂–∞—Ç–∏ –æ–¥–Ω–µ –≤—ñ–¥ –æ–¥–Ω–æ–≥–æ. –¢–æ–º—É:

- –ø–µ—Ä–µ–¥ —Ç–µ—Å—Ç–æ–º —Ç—Ä–µ–±–∞ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –Ω–æ–≤–∏–π –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ (–∞ –Ω–µ –æ—á—ñ–∫—É–≤–∞—Ç–∏ —â–æ –≤—ñ–Ω –¥–æ—Å—ñ –ø—Ä–∞—Ü—é—î –ø—ñ—Å–ª—è –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö —Ç–µ—Å—Ç—ñ–≤)
- –ø—ñ—Å–ª—è —Ç–µ—Å—Ç—É —Ç—Ä–µ–±–∞ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ –¥–æ –ø–æ—á–∞—Ç–∫–æ–≤–æ–≥–æ —Å—Ç–∞–Ω—É —É—Å—ñ stateful —Ä–µ—Å—É—Ä—Å–∏ (–±–∞–∑—É, –º–æ–∫–∏, —Ç–æ—â–æ)

```ts
type TestContext = {
  app: App;
  baseUrl: string;
};

// .sequential - to launch tests one after another
describe.sequential("Module Name", () => {
  beforeEach<TestContext>(async (t) => {
    // Prepare environment common for all tests
    t.app = createApp(testLogger, testConfig, ...);
    await t.app.start();

    // use to send requests to your api
    t.baseUrl = `http://${t.app.address}:${t.app.port}`;
  });

  afterEach<TestContext>(async (t) => {
    await t.app.stop();
    await db.reset();
    vi.clearAllMocks();
  });

  it<TestContext>("creates subscription with for new email and existing city", (t) => {
    // prepare data
    // perform tested actions
    // check result
  });

  it("fails if email is already registered", ...);
});
````

> üßº –¢–µ—Å—Ç–∏ –º–∞—é—Ç—å –±—É—Ç–∏ **—ñ–∑–æ–ª—å–æ–≤–∞–Ω—ñ**: –∑–∞–ø—É—Å–∫–∞—Ç–∏ –≤—Å–µ –∑–∞–Ω–æ–≤–æ, –æ—á–∏—â–∞—Ç–∏ state, –Ω–µ –ø–æ–∫–ª–∞–¥–∞—Ç–∏—Å—è –Ω–∞ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π —Ç–µ—Å—Ç.

---

## ‚öôÔ∏è –ó–∞–≥–∞–ª—å–Ω—ñ –ø–æ—Ä–∞–¥–∏

- –ü–∏—à–∏ –∫–æ–¥ —Ç–∞–∫, —â–æ–± –π–æ–≥–æ –±—É–ª–æ **–∑—Ä—É—á–Ω–æ —Ç–µ—Å—Ç—É–≤–∞—Ç–∏**.
- –¢–µ—Å—Ç–∏ –º–∞—é—Ç—å –±—É—Ç–∏ **–ø—Ä–æ—Å—Ç–∏–º–∏ —ñ –∑—Ä–æ–∑—É–º—ñ–ª–∏–º–∏** ‚Äî —è–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è.
- –ü—Ä–∏ —Ä–æ–∑—Ä–æ–±—Ü—ñ –∑–∞–ø—É—Å–∫–∞–π –∫–æ–¥ **—á–µ—Ä–µ–∑ —Ç–µ—Å—Ç–∏** (TDD –∞–±–æ —Ö–æ—á–∞ –± test-first mindset).
- –ü–µ—Ä–µ–¥ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è–º –±–∞–≥—É ‚Äî –Ω–∞–ø–∏—à–∏ —Ç–µ—Å—Ç, —è–∫–∏–π **–ø–∞–¥–∞—î**.
- –Ø–∫—â–æ —Å–∏—Å—Ç–µ–º–∞ –∑–º—ñ–Ω–∏–ª–∞—Å—å, –∞ –∂–æ–¥–µ–Ω —Ç–µ—Å—Ç –Ω–µ –≤–ø–∞–≤ ‚Äî –∑–Ω–∞—á–∏—Ç—å —Ç–µ—Å—Ç–∏ **–Ω–µ –ø–æ–≤–Ω—ñ**.
- –î–æ–±—Ä—ñ —Ç–µ—Å—Ç–∏ –¥–æ–ø–æ–º–∞–≥–∞—é—Ç—å **–∑–Ω–∞–π—Ç–∏ —ñ –∑—Ä–æ–∑—É–º—ñ—Ç–∏** –ø—Ä–æ–±–ª–µ–º—É.
- –Ø–∫—â–æ –≤–ø–∞–≤ —Ç–µ—Å—Ç –≤–∏—â–æ–≥–æ —Ä—ñ–≤–Ω—è, –ø–æ–¥—É–º–∞–π —è –ø—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ —Ü–µ —Ä–∞–Ω—ñ—à–µ

## üîÅ –ü–µ—Ä–µ–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ç–µ—Å—Ç–æ–≤–æ—ó –ª–æ–≥—ñ–∫–∏

–î—É–±–ª—é–≤–∞–Ω–Ω—è –∫–æ–¥—É –≤ —Ç–µ—Å—Ç–∞—Ö —Ü–µ –∞–±—Å–æ–ª—é—Ç–Ω–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ. –¶–µ –¥–æ–∑–≤–æ–ª—è—î –æ–¥—Ä–∞–∑—É –ø–æ–±–∞—á–∏—Ç–∏ —â–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –≤ —Ç–µ—Å—Ç—ñ –±–µ–∑ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—Å—Ç—ñ –¥–∏–≤–∏—Ç–∏—Å—è –∫–æ–¥ –≤ —ñ–Ω—à–∏—Ö –º—ñ—Å—Ü—è—Ö.

–ê–ª–µ —ñ–Ω–æ–¥—ñ —Ç–µ—Å—Ç–∏ —Å—Ç–∞—é—Ç—å –¥—É–∂–µ –≥—Ä–æ–º—ñ–∑–¥–∫–∏–º–∏, —â–æ —É—Å–∫–ª–∞–¥–Ω—é—î —Ä–æ–∑—É–º—ñ–Ω–Ω—è. –î–ª—è —Å–ø—Ä–æ—â–µ–Ω–Ω—è —Ç–µ—Å—Ç—ñ–≤ –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ø—ñ–¥—Ö–æ–¥–∏ –∑ —à–∞–±–ª–æ–Ω–∞–º–∏:

> –î–ª—è UI-—Ç–µ—Å—Ç—ñ–≤. –Ü–Ω–∫–∞–ø—Å—É–ª—é—é—Ç—å –ª–æ–≥—ñ–∫—É –≤–∑–∞—î–º–æ–¥—ñ—ó –∑ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º.

```ts
export class LoginPage {
  constructor(private page: Page) {}

  async goto() {
    await this.page.goto("/login");
  }

  async login(email: string, password: string) {
    await this.page.fill('[data-testid="email"]', email);
    await this.page.fill('[data-testid="password"]', password);
    await this.page.click('[data-testid="submit"]');
  }

  async getError() {
    return this.page.textContent('[data-testid="error"]');
  }
}
```

üìç –ó—Ä—É—á–Ω–æ –¥–ª—è E2E –∑ Playwright/Cypress.

---

### üß™ Test Drivers

> –î–ª—è unit/integration —Ç–µ—Å—Ç—ñ–≤. –Ü–Ω–∫–∞–ø—Å—É–ª—é—é—Ç—å –ª–æ–≥—ñ–∫—É —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è SUT, –º–æ–∫—ñ–≤ —Ç–∞ –≤–∑–∞—î–º–æ–¥—ñ—ó –∑ API.

```ts
export class SubscriptionDriver {
  constructor(private app: App, private db: Db) {}

  async createUser(email: string) {
    await this.db.insertUser({ email });
  }

  async subscribe(email: string, city: string) {
    return await this.app.inject({
      method: "POST",
      url: "/subscribe",
      payload: { email, city },
    });
  }
}
```

üìç –ü–æ–ª–µ–≥—à—É—î –Ω–∞–ø–∏—Å–∞–Ω–Ω—è —ñ —á–∏—Ç–∞–Ω–Ω—è —Ç–µ—Å—Ç—ñ–≤, –∑–º–µ–Ω—à—É—î boilerplate.

---

### ‚úÖ Custom Assertions

> –ü–µ—Ä–µ–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–æ–∫.

```ts
export function expectEmailSent(mockFn: Mock, to: string, subjectIncludes: string) {
  expect(mockFn).toHaveBeenCalledWith(
    expect.objectContaining({
      to,
      subject: expect.stringContaining(subjectIncludes),
    })
  );
}
```

üìç –ö—Ä–∞—â–µ, –Ω—ñ–∂ –ø–æ–≤—Ç–æ—Ä—é–≤–∞—Ç–∏ 5 —Ä—è–¥–∫—ñ–≤ `expect(...)` —É –∫–æ–∂–Ω–æ–º—É —Ç–µ—Å—Ç—ñ.

---
